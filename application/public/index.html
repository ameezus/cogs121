<!doctype html>
<html>
    <head>
        <title> Travel Visualizer</title>
        <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>

        <style>
            html{
                height:100%
            }
            body{
                margin:0;
                padding:0;
                width: 100%;
                height: 100%;
            }
            .frame{
                width: 100%;
                height: 95%;
                position: absolute;
                top: 50px;
            }
            iframe{
                border:0;
                width:100%;
                height:100%;
            }
            .overlay{
                position: absolute;
                top: 10%;
                right: 5%;
            }
            .navbar-brand-centered {
                position: absolute;
                left: 50%;
                display: block;
                width: 160px;
                text-align: center;
                background-color: transparent;
            }
            .navbar>.container .navbar-brand-centered,
            .navbar>.container-fluid .navbar-brand-centered {
                margin-left: -80px;
            }
            .active a{
                color: orange !important;
            }

        </style>

        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

        <!-- Optional theme -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

        <!-- Latest compiled and minified JavaScript -->
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

    </head>
    <body>
       <script>

         var d1;
         var accessToken = "EAACEdEose0cBAIZBFk2Rg1MS2KokG3mIAR5xe7ec2EduTaewm4rUvmcHuj4zQdVAANHtkYcZBInB39ZCrZCPUpBAkyR6EgEuBVZBotzMEGERGIjCMFZBU3ZBvpp8XPZBdGrcKauRzh0ZBhBP2qbteqTeLwCocUbPhA0hZBVZBM45EkHDwjUCSwGumRi";
  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "//connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));


  window.fbAsyncInit = function() {
    FB.init({
      appId            : '290268441425908',
      autoLogAppEvents : true,
      xfbml            : true,
      version          : 'v2.9'
    });
    FB.AppEvents.logPageView();


  checkLoginState();

  console.log(accessToken);
FB.api(
'/me/feed',
            'GET',
            {"fields":"place",
          access_token : accessToken},
            function(response) {
              // console.log(response);
                d1 = response;
                document.getElementById('heatmap').contentWindow.setUpData(d1);
            }
          );


  };
 function checkLoginState() {
    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
    });
  }

  function statusChangeCallback(response) {
    console.log('statusChangeCallback');
    console.log(response);
    accessToken = response.authResponse.accessToken;
    console.log(accessToken);
    // The response object is returned with a status field that lets the
    // app know the current login status of the person.
    // Full docs on the response object can be found in the documentation
    // for FB.getLoginStatus().
    if (response.status === 'connected') {
      // Logged into your app and Facebook.
      // window.location = "/index.html";
    } else {
      window.location = "/login.html";
    }
  }

//   FB.getLoginStatus(function(response) {
//   if (response.status === 'connected') {
//     console.log('Logged in.');
//     window.location = "/index.html";
//   }
//   else {
//     // FB.login();
//     // window.location = "/index.html";
//   }
// });


</script>
    


        <nav class="navbar navbar-inverse navbar-fixed-top">
          <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <a class="navbar-brand" href="#">Travel Visualizer</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav">
                <li class="active heatmap" onClick="load('heatmap.html')"><a>Heatmap</a></li>
                <li class="bubble" onClick="load('index33.html')"><a>Bubble</a></li>
                <li class="circle" onClick="load('bundle.html')"><a>Circle</a></li>
                <li class="line" onClick="load('timeline.html')"><a>Line</a></li>
                <li class="bar" onClick="load('bar.html')"><a>Bar Graph</a></li>
              </ul>

              <!--<ul class="nav navbar-nav navbar-right">
                <div class="fb-login-button" style="margin-right:7px; margin-top:5px;"
                 data-max-rows="1" data-size="large" data-button-type="login_with" data-show-faces="false" data-auto-logout-link="false" data-use-continue-as="false"></div>
                <li class="add" onClick="load('addLocations.html')"><a>Add Data</a></li>
              </ul>-->
            </div><!-- /.container-fluid -->
        </nav>

        <div class="frame">
            <iframe id="heatmap" src="heatmap.html"></iframe>
            <iframe id="index33" style="display:none" src="index33.html"></iframe>
            <iframe id="bundle" style="display:none" src="bundle.html"></iframe>
            <iframe id="timeline" style="display:none" src="timeline.html"></iframe>
            <iframe id="bar" style="display:none" src="bar.html"></iframe>
        </div>
    </body>

    <script>
        var firstIndex33 = false;
        var firstBundle = false;
        var firstTimeline= false;
        var firstBar= false;
     
        function load(page_name) {
          document.getElementById('heatmap').style.display = "none";
          document.getElementById('index33').style.display = "none";
          document.getElementById('bundle').style.display = "none";
          document.getElementById('timeline').style.display = "none";
          document.getElementById('bar').style.display = "none";

            // document.getElementById('vis').src = page_name;
            
            // var iFrame = $('#vis');
            // iFrame.load(page_name);
            // document.getElementById('vis').contentDocument.location.reload(true);
            // console.log(d1);
            // console.log("3333");
            // document.getElementById('vis').contentWindow.setUpData(d1);


            if($('.heatmap').hasClass('active')){
              $('.heatmap').removeClass('active');
            }
            if($('.bubble').hasClass('active')){
              $('.bubble').removeClass('active');
            }
            if($('.circle').hasClass('active')){
              $('.circle').removeClass('active');
            }
            if($('.line').hasClass('active')){
              $('.line').removeClass('active');
            }
            if($('.bar').hasClass('active')){
              $('.bar').removeClass('active');
            }

            if(page_name == 'heatmap.html') {
              $('.heatmap').addClass('active');
              document.getElementById('heatmap').style.display = "";
              // document.getElementById('heatmap').src = "heatmap.html";
            }
            if(page_name == 'index33.html') {
              $('.bubble').addClass('active');
              document.getElementById('index33').style.display = "";
              if (firstIndex33 == false){
                  document.getElementById('index33').src = "index33.html";
                  firstIndex33 = true;
              }
              
            }
            if(page_name == 'bundle.html') {
              $('.circle').addClass('active');
              document.getElementById('bundle').style.display = "";
              if (firstBundle == false){
                  document.getElementById('bundle').src = "bundle.html";
                  firstBundle = true;
              }
              

            }
            if(page_name == 'timeline.html') {
              $('.line').addClass('active');
              document.getElementById('timeline').style.display = "";
               if (firstTimeline == false){
                  document.getElementById('timeline').src = "timeline.html";
                  firstTimeline = true;
              }
            }
            if(page_name == 'bar.html') {
              $('.bar').addClass('active');
              document.getElementById('bar').style.display = "";
               if (firstBar == false){
                  document.getElementById('bar').src = "bar.html";
                  firstBar = true;
              }
              
            }
        }
   </script>
</html>
